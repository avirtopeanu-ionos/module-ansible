- hosts: localhost
  connection: local
  gather_facts: false

  vars_files:
    - vars.yml

  tasks:
    - name: Create datacenter
      ionos_cloud_datacenter:
        name: "{{ name }}-{{ 100 |random}}"
        description: "{{ description }}"
        location: us/las
      register: datacenter

    - name: Update datacenter
      ionos_cloud_datacenter:
        name: "{{ name }}"
        description: "{{ description }} - RENAMED"
        state: update

    - name: Remove datacenter
      ionos_cloud_datacenter:
        id: "{{ datacenter.id }}"
        state: absent